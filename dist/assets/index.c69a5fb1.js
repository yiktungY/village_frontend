var Ue=Object.defineProperty,Je=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var ee=(t,s,o)=>s in t?Ue(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,v=(t,s)=>{for(var o in s||(s={}))Be.call(s,o)&&ee(t,o,s[o]);if(X)for(var o of X(s))Oe.call(s,o)&&ee(t,o,s[o]);return t},w=(t,s)=>Je(t,Ae(s));import{c as de,a as U,b as R,j as n,d as e,u as k,r as p,F as M,e as H,f as N,L as A,B as Te,g as $e,N as Ee,H as Fe,h as Re,i as He,k as Ve,l as ze,m as ue,n as T,o as Ye,p as he,q as Qe,s as We,t as Ge,v as qe,w as q,x as te,y as se,z as _e,A as me,S as F,C as Ze,D as Ke,E as Xe,G as et,I as tt,J as st,P as ot,K as at,M as lt,O as nt,Q as rt,R as it,W as ct,T as dt,U as ut,V as O,X as ht,Y as mt,Z as ft,_ as gt}from"./vendor.416fe8ea.js";const pt=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(l){if(l.ep)return;l.ep=!0;const r=o(l);fetch(l.href,r)}};pt();const z=de("user/signUp",async({username:t,email:s,password:o},a)=>{try{const l=await U.post("http://localhost:8080/auth/signup",{username:t,email:s,password:o});return l.status===200?(localStorage.setItem("villageToken",l.data.token),l.data.user):a.rejectWithValue(l.data)}catch(l){return console.log("Error",l),a.rejectWithValue(l.response.data)}}),Y=de("user/signUp",async({email:t,password:s},o)=>{try{const a=await U.post("http://localhost:8080/auth/login",{email:t,password:s});return a.status===200?(localStorage.setItem("villageToken",a.data.token),a.data.user):o.rejectWithValue(a.data)}catch(a){return o.rejectWithValue(a.response.data)}}),xt={loginOpen:!1,loading:!1,userInfo:{},userToken:null,error:null,isLoggedIn:!1},fe=R({name:"login",initialState:xt,reducers:{openForm:t=>{t.loginOpen=!t.loginOpen,t.error=null},updateInfo(t,s){const o=s.payload;t.userInfo.avatarUrl=o.icon},autoLogin(t,s){const o=s.payload;t.isLoggedIn=!0,t.userInfo=o},logout:t=>{localStorage.removeItem("villageToken"),t.loading=!1,t.userInfo=null,t.userToken=null,t.error=null,t.isLoggedIn=!1,t.success=!1}},extraReducers:{[Y.pending]:t=>{t.loading=!0,t.error=null},[Y.fulfilled]:(t,s)=>{t.loading=!1,t.userInfo=s.payload,t.isLoggedIn=!0,t.loginOpen=!1},[Y.rejected]:(t,s)=>{t.loading=!1,t.error=s.payload.error}}}),ge=fe.actions,pe=R({name:"noticiation",initialState:{context:""},reducers:{showMessage(t,s){const o=s.payload;t.context=o},hideMessage(t){t.context=""}}}),C=pe.actions;const $=({type:t,id:s,label:o,icon:a,value:l,error:r,handleOnChange:c,handleOnBlur:u})=>n("div",{className:"h-20 flex flex-col justify-center items-center w-full",children:[n("div",{className:"relative my-2 w-full md:w-80",children:[e("div",{className:`flex absolute inset-y-0 right-4 text-2xl items-center pl-3 pointer-events-auto ${r.error?"text-red-500":"text-gray-500"}`,children:a}),e("input",{type:t,id:s,className:`block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border appearance-none  focus:outline-none focus:ring-0 peer md:bg-white  ${r.error?"border-red-600":"border-gray-300 focus:border-sky-600"}`,placeholder:" ",value:l,onChange:c,onBlur:u}),e("label",{htmlFor:s,className:`absolute text-sm duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2  peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1 ${r.error?"text-red-500":"text-gray-500 peer-focus:text-sky-600 "}`,children:o})]}),r.error&&e("div",{className:"text-red-500 text-xs z-20 md:font-bold",children:r.errorMessage})]}),oe=({icon:t,title:s})=>n("div",{className:"flex flex-row items-center",children:[e("div",{className:"text-xl mr-4",children:t}),e("div",{children:s})]}),ae=({label:t,icon:s,type:o,id:a,value:l,handleOnChange:r})=>n("div",{className:"relative my-2 mx-4",children:[e("div",{className:"flex absolute text-gray-500 inset-y-0 right-4 text-2xl items-center pl-3 pointer-events-auto",children:s}),e("input",{type:o,id:a,className:"block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900  border-gray-300 focus:border-sky-600 bg-transparent rounded-lg border appearance-none  focus:outline-none focus:ring-0  peer",placeholder:" ",onChange:r}),e("label",{htmlFor:a,className:"absolute text-sm duration-300 transform text-gray-500 peer-focus:text-sky-600 -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2  peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1",children:t})]}),E=({children:t})=>e("div",{className:"text-gray-600 font-bold",children:t}),D=({action:t,handleAction:s,disable:o})=>e("button",{type:"submit",onClick:s,disabled:!o,className:`text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg z-40 text-sm px-5 py-2.5 mr-2 mb-2 my-4 focus:outline-none md:w-48 ${o?" bg-sky-700 hover:bg-sky-800 ":"bg-neutral-300"}`,children:t}),_=()=>n("div",{role:"status",className:"w-full flex justify-center",children:[n("svg",{"aria-hidden":"true",className:"mr-2 w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),e("span",{className:"sr-only",children:"Loading..."})]}),xe=({title:t,message:s})=>n("div",{className:"flex p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800",role:"alert",children:[e("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e("span",{className:"sr-only",children:t}),n("div",{children:[e("span",{className:"font-medium",children:"Danger alert!"})," ",s]})]}),bt=({message:t})=>{const s=k();return p.exports.useEffect(()=>{setTimeout(()=>{s(C.hideMessage())},4e3)},[t]),e(M,{children:t.length>0&&n("div",{className:"absolute top-4 right-2 flex p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-200 dark:text-green-800 animate-fade duration-100 ease-out",role:"alert",children:[e("svg",{"aria-hidden":"true",className:"flex-shrink-0 inline w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e("span",{className:"sr-only",children:"Info"}),e("div",{children:e("span",{className:"font-medium",children:t})})]})})},vt={showJobPicture:!1,showJobApply:!1,showLogin:!1},be=R({name:"popUp",initialState:vt,reducers:{showPopUp(t,s){const o=s.payload;t[o]=!t[o]}}}),B=be.actions,yt=()=>{const t=k(),s=H(),o=N(u=>u.saveJob.totalQuantity),a=N(u=>u.noticiation.context),{userInfo:l,isLoggedIn:r}=N(u=>u.login),c=()=>{t(ge.logout()),s("")};return n("div",{className:"flex flex-row border-b-2 border-stone-100 px-2 py-4 justify-between items-center ",children:[a.length>0&&e(bt,{message:a}),r?n("div",{className:"flex flex-row",children:[e("img",{src:l==null?void 0:l.avatarUrl,alt:`icon of ${l.displayName}`,className:"h-8 w-8 object-cover rounded-full "}),e("button",{onClick:c,children:"logout"})]}):e("div",{className:"flex flex-row basis-1/6 text-sky-500 font-bold mx-1 hover:text-sky-600 hover:underline cursor-pointer",onClick:()=>t(B.showPopUp("showLogin")),children:"Login"}),e(A,{to:"/",children:e("div",{className:"text-3xl font-bold tracking-wide text-sky-500 hover:text-sky-600",children:"Village"})}),n("div",{className:"flex flex-row basis-1/6 justify-between md:justify-end",children:[n(A,{to:"/saveJobs",className:"flex justify-start w-10",children:[e(Te,{className:"text-2xl hover:text-sky-600 hover:drop-shadow-lg"}),o>0&&e("div",{className:"w-5 h-5 flex justify-center items-center relative bottom-2 right-3 bg-sky-500 rounded-full text-white text-xs drop-shadow-lg hover:animate-none animate-bounce ease-in-out duration-300",children:o})]}),e($e,{className:"text-2xl hover:text-sky-600 hover:drop-shadow-lg cursor-pointer"})]})]})},ve=()=>{const[t,s]=p.exports.useState([]),[o,a]=p.exports.useState(!0),[l,r]=p.exports.useState(null),[c,u]=p.exports.useState(0),i=async()=>(await U.get("http://localhost:8080/posts")).data,h=async()=>{try{const f=await i();f.length&&(u(f.length),s(f),a(!1))}catch(f){r(f)}};return p.exports.useEffect(()=>{h()},[]),{data:t,loading:o,error:l,total:c}},wt=localStorage.getItem("savedJobList"),V=JSON.parse(wt),Nt={jobsList:V===null?[]:V.jobsList,totalQuantity:V===null?0:V.totalQuantity,totalApplied:0,action:""},ye=R({name:"saveJob",initialState:Nt,reducers:{addToList(t,s){const o=s.payload,a=t.jobsList.findIndex(r=>r.post_id===o.post_id);a>=0?(t.jobsList.splice(a,1),t.totalQuantity--):(t.jobsList.push({post_id:o.post_id,displayName:o.displayName,updatedAt:o.updatedAt,title:o.title,type:o.type,status:o.status,avatarUrl:o.avatarUrl,saved:!0}),t.totalQuantity++);const l=JSON.stringify(t);window.localStorage.setItem("savedJobList",l)}}}),we=ye.actions;function St(t,s){const u=t-s;return u<6e4/3?"just now":u<6e4?"less than 1 min ago":u<36e5?Math.round(u/6e4)+" min ago":u<864e5?Math.round(u/36e5)+" h ago":u<2592e6?Math.round(u/864e5)+" days ago":u<31536e6?Math.round(u/2592e6)+" mon ago":Math.round(u/31536e6)+" years ago"}function kt(t){const s=new Date().getTime(),o=new Date(t).getTime();return St(s,o)}const Pt=(t,s,o)=>{const a=new Date(t);if(a=="Invalid Date")return"Invalid Date";let l="",r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Aug","Oct","Nov","Dec"];s==null&&(s="D-M-Y at h:m");for(let c=0;c<s.length;c++)switch(s[c]){case"Y":l+=a.getFullYear();break;case"M":let u=a.getMonth()+1;if(o==="month"){l+=r[u-1];break}else u<10&&(u="0"+u),l+=u;break;case"D":let i=a.getDate();i<10&&(i="0"+i),l+=i;break;case"h":let h=a.getHours();h<10&&(h="0"+h),l+=h;break;case"m":let f=a.getMinutes();f<10&&(f="0"+f),l+=f;break;case"s":let x=a.getSeconds();x<10&&(x="0"+x),l+=x;break;default:l+=s[c];break}return l},jt={jobInfo:{},jobID:"",loading:!1,success:!1,error:""},Ne=R({name:"jobDetails",initialState:jt,reducers:{getJobID(t,s){t.jobID=s.payload},getJobDetails(t,s){t.jobInfo=s.payload,t.success=!0}}}),Se=Ne.actions,Z=({post_id:t,displayName:s,updatedAt:o,title:a,type:l,status:r,avatarUrl:c})=>{const u=k(),i=N(d=>d.saveJob),h=N(d=>d.jobDetails.jobID),[f,x]=p.exports.useState(i==null?void 0:i.totalQuantity),b=()=>{u(we.addToList({post_id:t,displayName:s,updatedAt:o,title:a,type:l,status:r,avatarUrl:c}))};p.exports.useEffect(()=>{(i==null?void 0:i.totalQuantity)>f&&u(C.showMessage("Successfully added the item to the list")),(i==null?void 0:i.totalQuantity)<f&&u(C.showMessage("Removed the item!")),x(i==null?void 0:i.totalQuantity)},[i==null?void 0:i.totalQuantity]);const m=d=>{const g=i.jobsList.find(y=>y.post_id===d);if(g)return g.saved};return console.log(l),n("li",{className:`relative border-b-2 p-2 my-4 w-full list-none md:border md:w-80 ${h===t&&" border-sky-400 ring-4 "}`,children:[n("div",{className:"flex flex-row justify-between",children:[n("div",{className:"flex flex-col w-20 items-center mr-2",children:[e("img",{src:c,alt:`icon of ${s}`,className:"h-14 w-14 object-cover rounded-full "}),e("div",{children:"rank"})]}),n("div",{className:"flex flex-row justify-between w-full",children:[e(Ee,{className:"w-full",to:`/jobs/${t}`,onClick:()=>u(Se.getJobID(t)),children:n("div",{className:"flex flex-col w-full",children:[e("div",{className:"",children:s}),e("div",{className:"",children:a}),e("div",{className:"flex flex-row overflow-hidden",children:l.split(",").map((d,g)=>e("div",{className:"border bg-sky-200 mr-2 p-1 h-fit text-xs",children:d},g))})]})},t),e(Fe,{className:`absolute top-2 right-2 cursor-pointer text-3xl hover:drop-shadow-lg text-slate-400 ${m(t)&&"fill-red-400"}`,onClick:b})]})]}),e("div",{className:"flex justify-end",children:kt(o)})]})},Ct=()=>n("div",{className:"h-48 container border-b-2 border-stone-100 px-2 py-4",children:[e("div",{className:"text-l font-normal tracking-wide py-2 md:text-2xl md:font-bold",children:"Hey, what do you feel like doing today?"}),n("div",{className:"h-30 grid grid-cols-4 gap-4 py-4 px-4 md:w-3/4",children:[n(A,{to:"/createPost",className:"border-2 py-2 flex flex-col items-center shadow-lg  border-stone-100 hover:shadow-none",children:[e(Re,{className:"text-4xl text-sky-500"}),"Post"]}),n(A,{to:"/jobs/new",className:"border-2 py-2 flex flex-col items-center shadow-lg  border-stone-100 hover:shadow-none",children:[e(He,{className:"text-4xl text-sky-500"}),"Jobs"]}),n("div",{className:"border-2 py-2 flex flex-col items-center shadow-lg  border-stone-100 hover:shadow-none",children:[e(Ve,{className:"text-4xl text-sky-500"}),"Networks"]}),n("div",{className:"border-2 py-2 flex flex-col items-center shadow-lg  border-stone-100 hover:shadow-none",children:[e(ze,{className:"text-4xl text-sky-500"}),"Party"]})]})]}),I=()=>e("div",{className:"shadow rounded-md p-4 max-w-sm w-full mx-auto",children:n("div",{className:"animate-pulse flex space-x-4",children:[e("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),n("div",{className:"flex-1 space-y-6 py-1",children:[e("div",{className:"h-2 bg-slate-700 rounded"}),n("div",{className:"space-y-3",children:[n("div",{className:"grid grid-cols-3 gap-4",children:[e("div",{className:"h-2 bg-slate-700 rounded col-span-2"}),e("div",{className:"h-2 bg-slate-700 rounded col-span-1"})]}),e("div",{className:"h-2 bg-slate-700 rounded"})]})]})]})}),Q=t=>{const s="Please enter a valid email address";return[/\S+@\S+\.\S+/.test(t),s]},le=t=>{const s="Please enter a valid username";return t.length>3?[!0,s]:[!1,s]},W=t=>{const s="Password should longer than 4 digits";return t.length>4?[!0,s]:[!1,s]},ne=(t,s)=>{const o="Please enter the same password";return t!==s?[!1,o]:[!0,o]};function Lt(){H();const t=k(),[s,o]=p.exports.useState({email:"",username:"",password:"",confirmPassword:""}),[a,l]=p.exports.useState({email:{error:!1,touched:!1,errorMessage:""},username:{error:!1,touched:!1,errorMessage:""},password:{error:!1,touched:!1,errorMessage:""},confirmPassword:{error:!1,touched:!1,errorMessage:""}}),{loading:r,error:c,userInfo:u,success:i}=N(d=>d.signUp),[h,f]=p.exports.useState(!1),x=(d,g,y)=>{const[P]=y;P&&l(j=>w(v({},j),{[`${g}`]:{error:!1,touched:!1,errorMessage:""}})),o(j=>w(v({},j),{[`${g}`]:d.target.value}))},b=(d,g)=>{const[y,P]=g;y||l(j=>w(v({},j),{[`${d}`]:{error:!0,touched:!0,errorMessage:P}}))},m=d=>{d.preventDefault();const g={email:s.email,username:s.username,password:s.password};t(z(g))};return p.exports.useEffect(()=>{s.email.length>1&&s.username.length>1&&s.password.length>1&&s.confirmPassword.length===s.password.length?!a.email.error&&!a.username.error&&!a.password.error&&!a.confirmPassword.error&&f(!0):f(!1)},[s]),n("div",{className:"px-4 py-10 w-full flex flex-col items-center justify-center md:bg-white z-20 md:w-6/12 ",children:[c&&e(xe,{id:"signUp",title:"Sign Up Error",message:c}),e("div",{className:"text-lg font-medium z-20",children:"Create an Account"}),n("div",{className:"flex flex-row z-20",children:["Already have an account?",e("div",{onClick:()=>t(B.showPopUp("showLogin")),className:"text-sky-500 font-bold mx-1 hover:text-sky-600 hover:underline cursor-pointer",children:"Login"})]}),n("form",{className:"flex flex-col items-center w-full py-4 ",children:[e($,{type:"email",id:"email",label:"Create account with Email",icon:a.email.error?e(T,{}):e(ue,{}),error:a.email,handleOnChange:d=>x(d,"email",Q(d.target.value)),handleOnBlur:d=>b("email",Q(d.target.value))}),e($,{type:"text",id:"username",label:"UserName",icon:a.username.error?e(T,{}):e(Ye,{}),error:a.username,handleOnChange:d=>x(d,"username",le(d.target.value)),handleOnBlur:d=>b("username",le(d.target.value))}),e($,{type:"password",id:"newPassword",label:"Password",icon:a.password.error?e(T,{}):e(he,{}),error:a.password,handleOnChange:d=>x(d,"password",W(d.target.value)),handleOnBlur:d=>b("password",W(d.target.value))}),e($,{type:"password",id:"confirmPassword",label:"Comfired Password",icon:a.confirmPassword.error?e(T,{}):e(Qe,{}),error:a.confirmPassword,handleOnChange:d=>x(d,"confirmPassword",ne(d.target.value,s.password)),handleOnBlur:d=>b("confirmPassword",ne(d.target.value,s.password))}),r?e(_,{}):e(D,{action:"Sign Up",handleAction:m,disable:h})]})]})}const It=()=>{H(),k();const{loading:t,userInfo:s,error:o,success:a,isLoggedIn:l}=N(c=>c.login),r=()=>{if(s!=null&&s.address){let c=s==null?void 0:s.address.split(",");return`${c[2]||"null"}, ${c[0]||"null"}`}};return e("div",{className:"hidden md:block",children:n("div",{className:"fixed left-4 border w-72 p-4 flex flex-col space-y-4 tracking-wider",children:[e(We,{className:"absolute right-2 text-4xl text-yellow-500 "}),e("img",{src:s.avatarUrl,alt:`icon of ${s.displayName}`,className:"p-1 w-12 h-12 object-cover rounded-full ring-2 ring-gray-300"}),e("div",{className:"font-bold",children:s.displayName}),e(oe,{title:r(),icon:e(Ge,{})}),e(oe,{title:"Cooking",icon:e(qe,{})}),e("div",{className:"border border-sky-500 text-sky-500 p-2 w-fit hover:text-white hover:bg-sky-500 cursor-pointer",children:"Update your profile"})]})})},Mt=()=>{const t=H(),s=k(),{userInfo:o,loginOpen:a,isLoggedIn:l}=N(x=>x.login),r=N(x=>x.signUp),{data:c,loading:u,error:i}=ve(),[h,f]=p.exports.useState([]);return p.exports.useEffect(()=>{document.title="Village | Home";const x=c.slice(0,4);f(x)},[c]),p.exports.useEffect(()=>{r.success&&(t("/dashboard"),s(C.showMessage("Sign Up Successfully"))),r.finishBorading&&(t(""),s(C.showMessage("Finished boarding!")))},[r]),e("div",{className:"flex flex-col justify-center items-center w-full",children:l?n(M,{children:[e(Ct,{}),e("div",{className:"m-4 border-2 border-sky-500 w-full"}),n("div",{className:"flex flex-row w-4/5 justify-end",children:[e(It,{}),n("div",{children:[e("div",{className:"md:text-xl md:font-bold",children:"Jobs Recommended for You"}),e("div",{children:"Recommendedation are based on your location and job preferences."}),e("div",{className:"md:grid md:grid-rows-2 grid-flow-col gap-4",children:u?n(M,{children:[e(I,{}),e(I,{}),e(I,{}),e(I,{})]}):h.map(x=>e(Z,v({},x),x.post_id))}),e(A,{to:"/jobs/new",children:n("div",{className:"w-full text-sky-500 text-l font-bold flex flex-row justify-center items-center my-4 hover:text-sky-800",children:["See all Jobs ",e(q,{className:"ml-2 text-2xl"})]})}),e("div",{children:"People You Follow"}),e("div",{children:"People Recommended for You"})]})]})]}):n(M,{children:[e("img",{src:"src/assets/images/banner2.jpg",alt:"banner",className:"w-full h-40 object-cover md:absolute md:h-5/6 md:top-20 md:opacity-70"}),e("div",{className:"m-4 absolute top-28 right-6 text-grey font-bold text-lg md:relative md:top-0 md:right-0 md:text-4xl md:m-6",children:"Continuity. Connection. Community."}),e(Lt,{}),e("div",{children:" Explore Village"}),e(A,{to:"/jobs/new",children:n("div",{className:"w-full text-sky-500 text-l font-bold flex flex-row justify-center items-center my-4 hover:text-sky-800",children:["See all Jobs ",e(q,{className:"ml-2 text-2xl"})]})})]})})},Dt=(t,s,o)=>{const[a,l]=p.exports.useState([]),r=Math.ceil(s/o),c=()=>{const u=Array.from({length:r},(h,f)=>f+1);let i=u.slice(0,5);return t>3&&(i=u.slice(t-3,t+2)),r-t<3&&(i=u.slice(r-5,r)),i};return p.exports.useEffect(()=>{const u=c();l(u)},[t,o,s]),{page:a,MaxPage:r}},Ut=({onPageChange:t,onPageSizeOptionChange:s,totalCount:o,currentPage:a,pageSize:l,pageSizeOptions:r})=>{const c=Dt(a,o,l),u=()=>{const h=a+1;t(h)};return n("div",{className:"flex flex-col w-full justify-center items-center",children:[n("div",{className:"flex flex-row w-full justify-center items-center",children:[a===1?e(te,{className:"w-8 h-8 flex justify-center items-center text-xl rounded-full m-2 text-stone-300 ease-in-out duration-700"}):e(te,{onClick:()=>{const h=a-1;t(h)},className:"w-8 h-8 flex justify-center items-center text-xl rounded-full m-2 hover:bg-stone-100 ease-in-out duration-700"}),c.page.map((h,f)=>h===a?e("div",{onClick:()=>t(h),className:"w-8 h-8 flex justify-center items-center text-xl bg-sky-500 rounded-full text-white m-2 ease-in-out duration-300",children:h},f):e("div",{onClick:()=>t(h),className:"w-8 h-8 flex justify-center items-center text-xl rounded-full m-2 hover:bg-stone-100 ease-in-out duration-300 ",children:h},f)),a===c.MaxPage?e(se,{className:"w-8 h-8 flex justify-center items-center text-xl rounded-full m-2 text-stone-300 ease-in-out duration-700"}):e(se,{onClick:u,className:"w-8 h-8 flex justify-center items-center text-xl rounded-full m-2 hover:bg-stone-100  ease-in-out duration-700"})]}),e("select",{className:"m-2 px-4 py-2 w-2/4 bg-stone-200 rounded-lg",defaultValue:l,onChange:h=>{s(+h.target.value)},children:r.map(h=>n("option",{defaultValue:l===h,value:h,children:[h," per page"]},h))}),n("div",{className:"text-stone-400 tracking-wider",children:["Page ",a," of ",c.MaxPage]})]})},Jt=({selectedJobList:t,searchValue:s})=>{const o=t.filter(a=>{if(s.title==="")return a;const l=s.title.toLowerCase().replace(/\s+/g,"");return a.title.toLowerCase().replace(/\s+/g,"").indexOf(l)!==-1});return e("div",{children:o.map(a=>e(Z,v({},a),a.post_id))})},ke=()=>{const t=k(),s=N(u=>u.saveJob),{jobInfo:o,jobID:a,suceess:l}=N(u=>u.jobDetails),r=()=>{t(we.addToList(o))},c=u=>{const i=s.jobsList.find(h=>h.post_id===u);if(i)return i.saved};return e("div",{className:"flex flex-col w-full h-fit",children:Object.keys(o).length>0?n(M,{children:[e("img",{className:"h-60 object-cover cursor-pointer",src:o.jobImageUrl,alt:o.title,onClick:()=>t(B.showPopUp("showJobPicture"))}),n("div",{className:"flex flex-row justify-between",children:[n("div",{className:"flex flex-col justify-between w-1/2 m-4",children:[e("div",{children:o.displayname}),e("div",{className:"font-bold text-xl",children:o.title}),e("div",{children:"location"}),e("div",{children:o.salary})]}),n("div",{className:"flex flex-row justify-start w-1/2 h-20 m-4",children:[e(D,{disable:!0,action:"Easy Apply"}),e(D,{disable:!0,action:c(o.post_id)?"Saved":"Save",handleAction:r})]})]}),e("div",{className:"m-4",children:e(E,{children:`Require Date: ${Pt(o.requireDate,"M D, Y","month")}`})}),e("div",{className:"m-4 p-4 bg-gray-200",children:o.content}),n("div",{className:"m-4",children:[e(E,{children:"Job Analysic"}),e("div",{children:"duration: can use graph"}),e("div",{children:"how many people apply"}),e("div",{children:"how many people applied"}),e("div",{children:"user rating maybe"})]})]}):e(I,{})})},At=async t=>{if(t)return(await U.get(`http://localhost:8080/posts/${t}`)).data},Bt=async t=>{if(t)return await U.post("http://localhost:8080/posts",t)};var Pe={getJobDetails:At,creatJob:Bt};const G=[{value:"Accounting",label:"Accounting"},{value:"Babysitting",label:"Babysitting"},{value:"Cook",label:"Cook"},{value:"Housekeeping",label:"Housekeeping"},{value:"Design/ video editing",label:"Design/ video editing"},{value:"Gardening",label:"Gardening"},{value:"dog walking",label:"dog walking"},{value:"technician jobs",label:"technician jobs"},{value:"house moving",label:"house moving"}],re=[{value:"less than 30mins",label:"less than 5mins"},{value:"Hours",label:"Hours"},{value:"0.5 - 1 hour",label:"0.5 - 1 hour"},{value:"2 hours",label:"2 hours"},{value:"3 - 5 hours",label:"3 - 5 hours"},{value:"5 - 10 hours",label:"5 - 10 hours"},{value:"Days",label:"Days"},{value:"within 1 day",label:"within 1 day"},{value:"1 - 3 days",label:"1 - 3 days"},{value:"Weeks",label:"Weeks"},{value:"within 1 week",label:"within 1 week"},{value:"1 - 2 weeks",label:"1 - 2 weeks"},{value:"Months",label:"Months"}],je=({children:t,target:s})=>{const o=k();return e("div",{className:"absolute top-0 w-full h-full bg-zinc-300/70 z-50 flex justify-center items-center",children:n("div",{className:"bg-white top-0 w-screen h-screen md:w-auto md:h-auto",children:[e("div",{className:"w-full flex justify-end",children:e(_e,{onClick:()=>o(B.showPopUp(s)),className:"text-4xl hover:text-sky-600 hover:drop-shadow-lg cursor-pointer"})}),e("div",{children:t})]})})},ie=[2,15,25,50,100],Ot=()=>{const t=me(),s=k(),{jobInfo:o,jobID:a,suceess:l}=N(S=>S.jobDetails),{showJobPicture:r}=N(S=>S.popUp),[c,u]=p.exports.useState(1),[i,h]=p.exports.useState(ie[0]),[f,x]=p.exports.useState([]),{data:b,loading:m,error:d,total:g}=ve(),[y,P]=p.exports.useState({title:"",tag:"",location:""});console.log(r);const j=S=>{h(S),u(1)},J=S=>{u(S)},Me=async S=>{try{const L=await Pe.getJobDetails(S);L&&s(Se.getJobDetails(L))}catch(L){console.log(L)}};return p.exports.useEffect(()=>{document.title="Village | Jobs";const S=c*i,L=S-i,De=b.slice(L,S);x(De)},[c,i,b]),p.exports.useEffect(()=>{Me(a)},[a]),n("div",{children:[n("div",{className:"flex flex-row w-full items-center",children:[e(ae,{label:"Search by Title",type:"text",id:"searchByTitle",handleOnChange:S=>P(L=>w(v({},L),{title:S.target.value}))}),e(ae,{label:"Search by Location",type:"text",id:"searchByLocation",handleOnChange:S=>P(L=>w(v({},L),{location:S.target.value}))}),e(F,{closeMenuOnSelect:!1,components:t,defaultValue:G[4].value,isMulti:!0,options:G})]}),n("div",{className:"flex justify-start px-2",children:[g," jobs"]}),m?n(M,{children:[e(I,{}),e(I,{}),e(I,{}),e(I,{}),e(I,{})]}):n("div",{className:"flex flex-row justify-between m-2 ",children:[n("div",{className:"h-screen border overflow-auto flex flex-col items-center w-1/3",children:[e(Jt,{selectedJobList:f,searchValue:y}),d!==null&&e("div",{children:"null"}),e(Ut,{currentPage:c,totalCount:g,pageSize:i,pageSizeOptions:ie,onPageChange:J,onPageSizeOptionChange:j})]}),e("div",{className:"hidden md:block md:w-2/3 md:border md:ml-2 md:h-screen overflow-auto",children:e(ke,{})}),r&&e(je,{target:"showJobPicture",children:e("img",{className:"w-80",src:o.jobImageUrl,alt:o.title})})]})]})},Tt=()=>{const t=N(s=>s.saveJob);return n("div",{className:"p-4",children:[t.jobsList.length?n(M,{children:[n("div",{className:"flex justify-end px-2",children:[t.totalQuantity," Jobs you like"]}),t.jobsList.map(s=>e(Z,v({},s),s.post_id))]}):e("div",{children:"You haven't add any jobs yet. Please save the job you like by click the like icon"}),e(A,{to:"/jobs",children:n("div",{className:"w-full text-sky-500 text-l font-bold flex flex-row justify-center items-center my-4 hover:text-sky-800",children:["See all Jobs ",e(q,{className:"ml-2 text-2xl"})]})})]})},$t={loading:!1,userInfo:{},userToken:null,error:null,success:!1,isLoggedIn:!1,finishBorading:!1},Ce=R({name:"signUp",initialState:$t,reducers:{finishedBoarding(t){t.success=!1,t.finishBorading=!0}},extraReducers:{[z.pending]:t=>{t.loading=!0,t.error=null},[z.fulfilled]:(t,s)=>{t.loading=!1,t.success=!0,t.userInfo=s.payload,t.isLoggedIn=!0},[z.rejected]:(t,s)=>{t.loading=!1,t.error=s.payload.error}}}),Et=Ce.actions,Le=({selectedOption:t,setSelectedOption:s})=>{var r,c,u;const o=Ze.getAllCountries().map(i=>v({value:i.name,label:i.name},i)),a=i=>Ke.getStatesOfCountry(i).map(h=>v({value:h.name,label:h.name},h)),l=(i,h)=>Xe.getCitiesOfState(i,h).map(f=>v({value:f.name,label:f.name},f));return n("div",{className:"flex flex-col justify-between h-40",children:[e(F,{className:"m-2",defaultValue:t.country,onChange:i=>{s(h=>w(v({},h),{country:i}))},options:o,placeholder:"Country"}),e(F,{className:"m-2",defaultValue:t.state,onChange:i=>{s(h=>w(v({},h),{state:i}))},options:a((r=t.country)==null?void 0:r.isoCode),placeholder:"State"}),e(F,{className:"m-2",defaultValue:t.city,onChange:i=>{s(h=>w(v({},h),{city:i}))},options:l((c=t.state)==null?void 0:c.countryCode,(u=t.state)==null?void 0:u.isoCode),placeholder:"City"})]})},Ft=async(t,s)=>await U.put(`http://localhost:8080/users/${t}`,s);var ce={editUserInfo:Ft};const Rt={apiKey:"AIzaSyCNMJDGK0pc6sklvk0eHnutZyFO2E5eugo",authDomain:"village-345022.firebaseapp.com",projectId:"village-345022",storageBucket:"village-345022.appspot.com",messagingSenderId:"1059450499873",appId:"1:1059450499873:web:d202c0b796f92795f5c460",measurementId:"G-NDJ9KSQRWT"},K=et(Rt),Ht=tt(K);st(K);ot(K);new at;const Ie=({icon:t,username:s,image:o,action:a})=>{const[l,r]=p.exports.useState(100),[c,u]=p.exports.useState(t),i=f=>{const x=f.target.files[0];h(x)},h=f=>{if(!f)return;const x=nt(Ht,`/files/${f.name}`),b=rt(x,f);b.on("state_changed",m=>{const d=Math.round(m.bytesTransferred/m.totalBytes)*100;r(d)},m=>console.log(m),()=>{it(b.snapshot.ref).then(m=>{u(m),a(m)})})};return n("label",{htmlFor:"dropzone-file",children:[e("div",{className:"absolute bg-gray-200 p-1 w-40 h-40 rounded-full ring-2 opacity-0 hover:opacity-50 z-20 flex justify-center items-center",children:n("div",{children:["Upload ",o]})}),l===100?c?e("img",{className:"p-1 w-40 h-40 object-cover rounded-full ring-2 ring-gray-300 animate-pulse",src:c,alt:`${s}`}):e("div",{className:"w-full h-40 bg-gray-600 flex justify-center items-center ",children:e(lt,{className:"text-4xl text-green-600"})}):e(_,{}),e("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:f=>i(f)})]})},Vt=()=>{const t=N(b=>b.signUp),s=N(b=>b.login),o=k(),a=H(),[l,r]=p.exports.useState(0),[c,u]=p.exports.useState({country:null,state:null,city:null}),i=()=>{r(b=>b-=25)},h=()=>{r(b=>b+=25)},f=async()=>{var b,m,d;try{const g=[(b=c.country)==null?void 0:b.name,(m=c.state)==null?void 0:m.name,(d=c.city)==null?void 0:d.name].join(","),y=await ce.editUserInfo(s.userInfo.id,{address:g});(y==null?void 0:y.status)===200&&o(Et.finishedBoarding())}catch(g){console.log(g)}},x=async b=>{try{await ce.editUserInfo(s.userInfo.id,{avatarUrl:b})&&(o(authAction.updateInfo({icon:b})),o(C.showMessage("Your new icon looks great!")))}catch(m){console.log(m)}};return p.exports.useEffect(()=>{t.finishBorading&&(a("/"),o(C.showMessage("Finished boarding!")))},[t.finishBorading]),n("div",{className:"m-2 h-96 flex flex-col justify-between",children:[n("div",{children:["Welcome! ",s.userInfo.displayName]}),e("div",{children:"Let us start the journey now! "}),l===25&&e("div",{className:"w-full flex flex-col items-center",children:e(Ie,{icon:s.userInfo.avatarUrl,action:x,image:"Icon",username:s.userInfo.displayName})}),l===50&&e(Le,{setSelectedOption:u,selectedOption:c}),l===75&&e("div",{children:"choosing your interested"}),l===100&&e("div",{children:"show the progress"}),n("div",{className:"w-full flex justify-between",children:[l!==0&&e(D,{action:"Go Back",handleAction:i,disable:!0}),l===100?e(D,{action:"Finish",handleAction:f,disable:!0}):e(D,{action:l===0?"Start":"Next",handleAction:h,disable:!0})]}),e("div",{className:"w-full bg-gray-200",children:n("div",{className:"bg-green-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none ",style:{width:`${l}%`},children:[l,"%"]})})]})};const zt=()=>{const t=k(),s=me(),[o,a]=p.exports.useState({title:"",content:"",status:"open to apply",type:"",salary:"",requireDate:"",estimateHour:"",salaryReplacement:"",jobImageUrl:"",location:""}),[l,r]=p.exports.useState(""),[c,u]=p.exports.useState({country:null,state:null,city:null}),{userInfo:i,isLoggedIn:h}=N(m=>m.login),f=m=>{a(d=>w(v({},d),{jobImageUrl:m}))},x=m=>{const d=m.map(g=>g.value).join(",");a(g=>w(v({},g),{type:d}))},b=async()=>{try{const m=w(v({},o),{userId:i.id}),d=await Pe.creatJob(m);console.log("====database====="),console.log(d),d.status===201&&t(C.showMessage(`${o.title} Updated successfully!`))}catch(m){t(C.showMessage({error:m}))}};return p.exports.useEffect(()=>{var d,g,y;const m=[(d=c.country)==null?void 0:d.name,(g=c.state)==null?void 0:g.name,(y=c.city)==null?void 0:y.name].join(",");a(P=>w(v({},P),{location:m}))},[c]),p.exports.useEffect(()=>{document.title="Upload Post"},[]),e("section",{className:"m-4",children:h?n(M,{children:[e("div",{className:"text-2xl",children:"Create a New Post"}),n("div",{className:"flex flex-col md:flex-row w-full",children:[n("div",{className:"flex flex-col w-full md:w-1/2 m-4",children:[e("input",{type:"text",className:" px-2.5 pb-2.5 mb-4 pt-4 w-full text-black text-xl bg-gray-600 rounded-lg border appearance-none  focus:outline-none focus:ring-0 peer ",placeholder:"Title",value:o.title,onChange:m=>a(d=>w(v({},d),{title:m.target.value}))}),e("textarea",{id:"content",rows:"10",className:"block p-2.5 w-full mb-4 text-sm text-gray-900 bg-gray-50 rounded-lg border  ",value:o.content,onChange:m=>a(d=>w(v({},d),{content:m.target.value})),placeholder:"Job details, requirement..."}),e("div",{className:"w-full",children:e(Ie,{icon:null,action:f,image:"Picture",username:"Dummy Picture"})})]}),n("div",{className:"flex flex-col justify-between w-full md:w-1/2 m-4 h-90 ",children:[n("div",{children:[e(E,{children:"Payment"}),e("input",{type:"text",className:"px-2.5 pb-2.5 mb-4 pt-4 w-full text-black text-sm rounded-lg border appearance-none  ",placeholder:"10 cad - 20 cad",value:o.salary,onChange:m=>a(d=>w(v({},d),{salary:m.target.value}))})]}),n("div",{children:[e(E,{children:"Choose TAGs"}),e(F,{closeMenuOnSelect:!1,components:s,defaultValue:G[4].value,isMulti:!0,options:G,onChange:x})]}),n("div",{children:[e(E,{children:"Date"}),e(ct,{className:"px-2.5 pb-2.5 mb-4 pt-4 w-full text-black text-sm rounded-lg border appearance-none ",selected:o.requireDate||new Date,onChange:m=>a(d=>w(v({},d),{requireDate:m}))})]}),n("div",{children:[e(E,{children:"Estimate Hour"}),e(F,{closeMenuOnSelect:!1,components:s,defaultValue:re[0].value,options:re,onChange:m=>a(d=>w(v({},d),{estimateHour:m.value}))})]}),n("div",{className:"flex flex-row items-center m-4",children:[e("input",{id:"inPerson",type:"radio",value:"inPerson",name:"deliverMethod",onClick:m=>r(m.target.value),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),e("label",{htmlFor:"inPerson",className:"ml-2 text-sm mr-4 font-medium text-gray-900 ",children:"In Person"}),e("input",{id:"online",type:"radio",value:"online",name:"deliverMethod",onClick:m=>r(m.target.value),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500  "}),e("label",{htmlFor:"online",className:"ml-2 text-sm font-medium text-gray-900 ",children:"Online"})]}),l==="inPerson"&&e(Le,{setSelectedOption:u,selectedOption:c})]})]}),e("div",{className:"w-full flex justify-end",children:e(D,{action:"Post",handleAction:b,disable:"false"})})]}):n(M,{children:[e("p",{children:"Pleas login to create your own posts."}),e("div",{className:"flex flex-row basis-1/6 text-sky-500 font-bold mx-1 hover:text-sky-600 hover:underline cursor-pointer",onClick:()=>t(B.showPopUp("showLogin")),children:"Login"})]})})},Yt=()=>{H();const t=k(),{loading:s,userInfo:o,error:a,success:l,isLoggedIn:r}=N(g=>g.login),[c,u]=p.exports.useState({email:"",password:""}),[i,h]=p.exports.useState({email:{error:!1,touched:!1,errorMessage:""},password:{error:!1,touched:!1,errorMessage:""}}),[f,x]=p.exports.useState(!1),b=(g,y,P)=>{const[j]=P;j&&h(J=>w(v({},J),{[`${y}`]:{error:!1,touched:!1,errorMessage:""}})),u(J=>w(v({},J),{[`${y}`]:g.target.value}))},m=(g,y)=>{const[P,j]=y;P||h(J=>w(v({},J),{[`${g}`]:{error:!0,touched:!0,errorMessage:j}}))},d=g=>{g.preventDefault();const y={email:c.email,password:c.password};t(Y(y))};return p.exports.useEffect(()=>{r&&(t(C.showMessage("Login Successfully")),t(B.showPopUp("showLogin")))},[r]),p.exports.useEffect(()=>{c.email.length>5&&c.password.length>4?!i.email.error&&!i.password.error&&x(!0):x(!1)},[c]),n("div",{className:"px-4 py-10 flex flex-col items-center",children:[e("div",{className:"text-lg font-medium",children:"Login Your Account"}),n("div",{className:"flex flex-row",children:["No account yet?",e("div",{onClick:()=>t(B.showPopUp("showLogin")),className:"text-sky-500 font-bold mx-1 hover:text-sky-600 hover:underline cursor-pointer",children:"Sign Up Now"})]}),n("form",{className:"flex flex-col items-center w-full py-4",children:[e($,{type:"email",id:"email",label:"Enter Email",icon:i.email.error?e(T,{}):e(ue,{}),error:i.email,handleOnChange:g=>b(g,"email",Q(g.target.value)),handleOnBlur:g=>m("email",Q(g.target.value))}),e($,{type:"password",id:"EnterPassword",label:"Enter Password",icon:i.password.error?e(T,{}):e(he,{}),error:i.password.error,handleOnChange:g=>b(g,"password",W(g.target.value)),handleOnBlur:g=>m("password",W(g.target.value))}),s?e(_,{}):e(D,{action:"Login",handleAction:d,disable:f})]}),a&&e(xe,{id:"login",title:"Login Error",message:a})]})},Qt=()=>{const{showLogin:t}=N(s=>s.popUp);return n(dt,{children:[e(yt,{}),t&&e(je,{target:"showLogin",children:e(Yt,{})}),n(ut,{children:[e(O,{path:"/",element:e(Mt,{})}),e(O,{path:"/jobs/:jobID",element:e(Ot,{})}),e(O,{path:"/saveJobs",element:e(Tt,{})}),e(O,{path:"/dashboard",element:e(Vt,{})}),e(O,{path:"/createPost",element:e(zt,{})}),e(O,{path:"/job/:jobID",element:e(ke,{})})]})]})};U.interceptors.request.use(async function(t){const s=localStorage.getItem("villageToken");return t.headers["x-access-token"]=s,t});function Wt(){const t=k(),s=async()=>await U.get("http://localhost:8080/auth/user"),o=async()=>{try{const a=await s();a.status===400&&t(C.showMessage("Login fail")),a.status===200&&t(ge.autoLogin(a.data.user))}catch(a){console.error(a)}};return p.exports.useEffect(()=>{o()},[]),e("div",{children:e(Qt,{})})}const Gt=ht({reducer:{signUp:Ce.reducer,login:fe.reducer,saveJob:ye.reducer,noticiation:pe.reducer,jobDetails:Ne.reducer,popUp:be.reducer}});mt.render(e(ft,{store:Gt,children:e(gt.StrictMode,{children:e(Wt,{})})}),document.getElementById("root"));
